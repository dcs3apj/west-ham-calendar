<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" ng-click="goToLatestSeason()">Hammers Calendar</a>
      <ul class="nav">
        <li class="dropdown">
          <a class="dropdown-toggle"> {{currentSeason}} <b class="caret"></b> </a>
          <ul class="dropdown-menu">
            <li ng-repeat="season in seasons">
              <a ng-click="setCurrentSeason(season)">{{season}}</a>
            </li>
          </ul>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle"> {{ticketType.label}} tickets <b class="caret"></b> </a>
          <ul class="dropdown-menu">
            <li ng-repeat="ticketType in ticketTypes">
              <a ng-click="setTicketType(ticketType)">{{ticketType.label}} tickets</a>
            </li>
          </ul>
        </li>
      </ul>
      <ul class="nav pull-right">
        <li ng-show="authorised" class="dropdown">
          <a class="dropdown-toggle"> {{user}} <b class="caret"></b> </a>
          <ul class="dropdown-menu">
            <li>
              <a href="logout">Logout</a>
            </li>
          </ul>
        </li>
        <li ng-hide="authorised">
          <a href="authenticate/google">Login</a>
        </li>
      </ul>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <table class="table table-hover table-condensed main-table">
      <tbody>
        <tr>
          <th>Date</th>
          <th>Opponents</th>
          <th>Competition</th>
          <th>Location</th>
          <th>Result</th>
          <th>{{ticketType.label}} tickets</th>
          <th ng-show="authorised">Attended</th>
        </tr>
        <tr ng-repeat="game in games">
          <td ng-show="game.type == 'month'" colspan="{{ 6 + authorised }}">
            <span class="label label-month">{{game.month}}</span>
          </td>
          <td ng-hide="game.type == 'month'">
            <span ng-show="game.gameTimeType.value == 'ThreePmSaturday'" class="badge badge-success"
                  title="Rejoice for a game at 3pm on a Saturday!">
              {{game.at | customDate}}
            </span>
            <span ng-show="game.gameTimeType.value == 'Weekday'" class="badge badge-important"
                  title="This game is being played on a weekday">
              {{game.at | customDate}}
            </span>
            <span ng-show="game.gameTimeType.value == 'Weekend'" class="badge badge-warning"
                  title="This game is being played during the weekend but not at 3pm on a Saturday">
              {{game.at | customDate}}
            </span>
          </td>
          <td ng-hide="game.type == 'month'">{{game.opponents}}</td>
          <td ng-hide="game.type == 'month'">{{game.competition.name}}</td>
          <td ng-hide="game.type == 'month'">
            <span ng-hide="game.geoLocation">{{game.location.persistableToken}}</span>
            <a ng-show="game.geoLocation" href="{{game.geoLocation.url}}" target="_blank">
              {{game.location.persistableToken}}
            </a>
          </td>
          <td ng-hide="game.type == 'month'">
            <span ng-show="game.result &amp;&amp !game.matchReport">{{game.result}}</span>
            <a ng-show="game.result &amp;&amp; game.matchReport" href="{{game.matchReport}}" target="_blank">
              {{game.result}}
            </a>
          </td>
          <td ng-hide="game.type == 'month'">{{game.ticketsAt[ticketType.name] | customDate:true}}</td>
          <td ng-hide="game.type == 'month' || !authorised">
            <button ng-show="game.attended" type="button" class="btn btn-success" ng-model="game.attended"
                    ng-click="unattendGame(game)" btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false">
              <i class="icon-ok icon-white"></i>
            </button>
            <button ng-hide="game.attended" type="button" class="btn btn-danger" ng-model="game.attended"
                    ng-click="attendGame(game)" btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false">
              <i class="icon-remove icon-white"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

